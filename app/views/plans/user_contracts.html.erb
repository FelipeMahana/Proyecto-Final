<h4>Tabla con usuarios con sus planes contratados</h4> 

<table class="table table-striped table-hover ">
  <thead>
    <tr>
      <th>Usuario</th>
      <th>Plan</th>
      <th>Fecha Contrato</th>
      <th>Duracion Plan(mes)</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <!-- Filtrar entre los usuarios que han contratado o no plan -->
    <% @users.each do |user| %>
      <tr>
        <% if user.name.present? %>
          <td><%= user.name %></td>
        <% else %>
          <td><%= user.email %></td>
        <% end %>
<!-- agregar ifs -->

        <td>
          <% unless user.contracts.last.nil? %>
            <% unless user.contracts.last.plan.nil? %>
              <%= user.contracts.last.plan.description %>
            <% end %>
          <% end %>
        <%#= user.contracts.last.try(:plan).try(:description) %>
          
        </td>
        <!-- ruby toma 1 mes como 2629746 segs (user.contracts.last.try(:created_at) + 2629746)-->
        <td><%#user.contracts.last.try(:created_at) + user.contracts.last.try(:plan).try(:duration).try(:month) %>
            <%= user.contracts.last.try(:created_at) %>
        </td>
        <td><%= user.contracts.last.try(:plan).try(:duration) %></td>
        <td><%= link_to "Hola, realizar rutina"%></td>  


      </tr>
    <% end %>
  </tbody>
</table>
